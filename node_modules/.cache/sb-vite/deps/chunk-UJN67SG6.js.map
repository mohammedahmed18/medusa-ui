{
  "version": 3,
  "sources": ["../../../../../../../node_modules/@react-stately/utils/dist/packages/@react-stately/utils/src/index.ts", "../../../../../../../node_modules/@react-stately/utils/dist/packages/@react-stately/utils/src/useControlledState.ts", "../../../../../../../node_modules/@react-stately/utils/dist/packages/@react-stately/utils/src/number.ts", "../../../../../../../node_modules/@internationalized/string/dist/packages/@internationalized/string/src/index.ts", "../../../../../../../node_modules/@internationalized/string/dist/packages/@internationalized/string/src/LocalizedStringDictionary.ts", "../../../../../../../node_modules/@internationalized/string/dist/packages/@internationalized/string/src/LocalizedStringFormatter.ts"],
  "sourcesContent": ["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\nexport {useControlledState} from './useControlledState';\nexport {clamp, snapValueToStep, toFixedNumber} from './number';\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {useCallback, useEffect, useRef, useState} from 'react';\n\nexport function useControlledState<T>(\n  value: T,\n  defaultValue: T,\n  onChange: (value: T, ...args: any[]) => void\n): [T, (value: T, ...args: any[]) => void]  {\n  let [stateValue, setStateValue] = useState(value || defaultValue);\n\n  let isControlledRef = useRef(value !== undefined);\n  let isControlled = value !== undefined;\n  useEffect(() => {\n    let wasControlled = isControlledRef.current;\n    if (wasControlled !== isControlled) {\n      console.warn(`WARN: A component changed from ${wasControlled ? 'controlled' : 'uncontrolled'} to ${isControlled ? 'controlled' : 'uncontrolled'}.`);\n    }\n    isControlledRef.current = isControlled;\n  }, [isControlled]);\n\n  let currentValue = isControlled ? value : stateValue;\n  let setValue = useCallback((value, ...args) => {\n    let onChangeCaller = (value, ...onChangeArgs) => {\n      if (onChange) {\n        if (!Object.is(currentValue, value)) {\n          onChange(value, ...onChangeArgs);\n        }\n      }\n      if (!isControlled) {\n        // If uncontrolled, mutate the currentValue local variable so that\n        // calling setState multiple times with the same value only emits onChange once.\n        // We do not use a ref for this because we specifically _do_ want the value to\n        // reset every render, and assigning to a ref in render breaks aborted suspended renders.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        currentValue = value;\n      }\n    };\n\n    if (typeof value === 'function') {\n      console.warn('We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320');\n      // this supports functional updates https://reactjs.org/docs/hooks-reference.html#functional-updates\n      // when someone using useControlledState calls setControlledState(myFunc)\n      // this will call our useState setState with a function as well which invokes myFunc and calls onChange with the value from myFunc\n      // if we're in an uncontrolled state, then we also return the value of myFunc which to setState looks as though it was just called with myFunc from the beginning\n      // otherwise we just return the controlled value, which won't cause a rerender because React knows to bail out when the value is the same\n      let updateFunction = (oldValue, ...functionArgs) => {\n        let interceptedValue = value(isControlled ? currentValue : oldValue, ...functionArgs);\n        onChangeCaller(interceptedValue, ...args);\n        if (!isControlled) {\n          return interceptedValue;\n        }\n        return oldValue;\n      };\n      setStateValue(updateFunction);\n    } else {\n      if (!isControlled) {\n        setStateValue(value);\n      }\n      onChangeCaller(value, ...args);\n    }\n  }, [isControlled, currentValue, onChange]);\n\n  return [currentValue, setValue];\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n/**\n * Takes a value and forces it to the closest min/max if it's outside. Also forces it to the closest valid step.\n */\nexport function clamp(value: number, min: number = -Infinity, max: number = Infinity): number {\n  let newValue = Math.min(Math.max(value, min), max);\n  return newValue;\n}\n\nexport function snapValueToStep(value: number, min: number, max: number, step: number): number {\n  let remainder = ((value - (isNaN(min) ? 0 : min)) % step);\n  let snappedValue = Math.abs(remainder) * 2 >= step\n    ? value + Math.sign(remainder) * (step - Math.abs(remainder))\n    : value - remainder;\n\n  if (!isNaN(min)) {\n    if (snappedValue < min) {\n      snappedValue = min;\n    } else if (!isNaN(max) && snappedValue > max) {\n      snappedValue = min + Math.floor((max - min) / step) * step;\n    }\n  } else if (!isNaN(max) && snappedValue > max) {\n    snappedValue = Math.floor(max / step) * step;\n  }\n\n  // correct floating point behavior by rounding to step precision\n  let string = step.toString();\n  let index = string.indexOf('.');\n  let precision = index >= 0 ? string.length - index : 0;\n\n  if (precision > 0) {\n    let pow = Math.pow(10, precision);\n    snappedValue = Math.round(snappedValue * pow) / pow;\n  }\n\n  return snappedValue;\n}\n\n/* Takes a value and rounds off to the number of digits. */\nexport function toFixedNumber(value: number, digits: number, base: number = 10): number {\n  const pow = Math.pow(base, digits);\n\n  return Math.round(value * pow) / pow;\n}\n", "/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nexport type {Variables, LocalizedString} from './LocalizedStringFormatter';\nexport type {LocalizedStrings} from './LocalizedStringDictionary';\nexport {LocalizedStringDictionary} from './LocalizedStringDictionary';\nexport {LocalizedStringFormatter} from './LocalizedStringFormatter';\n", "/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport type {LocalizedString} from './LocalizedStringFormatter';\n\nexport type LocalizedStrings<K extends string, T extends LocalizedString> = {\n  [lang: string]: Record<K, T>\n};\n\n/**\n * Stores a mapping of localized strings. Can be used to find the\n * closest available string for a given locale.\n */\nexport class LocalizedStringDictionary<K extends string = string, T extends LocalizedString = string> {\n  private strings: LocalizedStrings<K, T>;\n  private defaultLocale: string;\n\n  constructor(messages: LocalizedStrings<K, T>, defaultLocale: string = 'en-US') {\n    // Clone messages so we don't modify the original object.\n    this.strings = {...messages};\n    this.defaultLocale = defaultLocale;\n  }\n\n  /** Returns a localized string for the given key and locale. */\n  getStringForLocale(key: K, locale: string): T {\n    let strings = this.strings[locale];\n    if (!strings) {\n      strings = getStringsForLocale(locale, this.strings, this.defaultLocale);\n      this.strings[locale] = strings;\n    }\n\n    let string = strings[key];\n    if (!string) {\n      throw new Error(`Could not find intl message ${key} in ${locale} locale`);\n    }\n\n    return string;\n  }\n}\n\nfunction getStringsForLocale<K extends string, T extends LocalizedString>(locale: string, strings: LocalizedStrings<K, T>, defaultLocale = 'en-US') {\n  // If there is an exact match, use it.\n  if (strings[locale]) {\n    return strings[locale];\n  }\n\n  // Attempt to find the closest match by language.\n  // For example, if the locale is fr-CA (French Canadian), but there is only\n  // an fr-FR (France) set of strings, use that.\n  // This could be replaced with Intl.LocaleMatcher once it is supported.\n  // https://github.com/tc39/proposal-intl-localematcher\n  let language = getLanguage(locale);\n  if (strings[language]) {\n    return strings[language];\n  }\n\n  for (let key in strings) {\n    if (key.startsWith(language + '-')) {\n      return strings[key];\n    }\n  }\n\n  // Nothing close, use english.\n  return strings[defaultLocale];\n}\n\nfunction getLanguage(locale: string) {\n  // @ts-ignore\n  if (Intl.Locale) {\n    // @ts-ignore\n    return new Intl.Locale(locale).language;\n  }\n\n  return locale.split('-')[0];\n}\n", "/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport type {LocalizedStringDictionary} from './LocalizedStringDictionary';\n\nexport type Variables = Record<string, string | number | boolean> | undefined;\nexport type LocalizedString = string | ((args: Variables, formatter?: LocalizedStringFormatter<any, any>) => string);\ntype InternalString = string | (() => string);\n\nconst pluralRulesCache = new Map<string, Intl.PluralRules>();\nconst numberFormatCache = new Map<string, Intl.NumberFormat>();\n\n/**\n * Formats localized strings from a LocalizedStringDictionary. Supports interpolating variables,\n * selecting the correct pluralization, and formatting numbers for the locale.\n */\nexport class LocalizedStringFormatter<K extends string = string, T extends LocalizedString = string> {\n  private locale: string;\n  private strings: LocalizedStringDictionary<K, T>;\n\n  constructor(locale: string, strings: LocalizedStringDictionary<K, T>) {\n    this.locale = locale;\n    this.strings = strings;\n  }\n\n  /** Formats a localized string for the given key with the provided variables. */\n  format(key: K, variables?: Variables): string {\n    let message = this.strings.getStringForLocale(key, this.locale);\n    return typeof message === 'function' ? message(variables, this) : message;\n  }\n\n  protected plural(count: number, options: Record<string, InternalString>, type: Intl.PluralRuleType = 'cardinal') {\n    let opt = options['=' + count];\n    if (opt) {\n      return typeof opt === 'function' ? opt() : opt;\n    }\n\n    let key = this.locale + ':' + type;\n    let pluralRules = pluralRulesCache.get(key);\n    if (!pluralRules) {\n      pluralRules = new Intl.PluralRules(this.locale, {type});\n      pluralRulesCache.set(key, pluralRules);\n    }\n\n    let selected = pluralRules.select(count);\n    opt = options[selected] || options.other;\n    return typeof opt === 'function' ? opt() : opt;\n  }\n\n  protected number(value: number) {\n    let numberFormat = numberFormatCache.get(this.locale);\n    if (!numberFormat) {\n      numberFormat = new Intl.NumberFormat(this.locale);\n      numberFormatCache.set(this.locale, numberFormat);\n    }\n    return numberFormat.format(value);\n  }\n\n  protected select(options: Record<string, InternalString>, value: string) {\n    let opt = options[value] || options.other;\n    return typeof opt === 'function' ? opt() : opt;\n  }\n}\n"],
  "mappings": "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",
  "names": ["$6imuh$useState", "$6imuh$useRef", "$6imuh$useEffect", "$6imuh$useCallback", "value"]
}
